<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Th·ªùi kh√≥a bi·ªÉu vui nh·ªôn | D√†nh cho h·ªçc sinh Ti·ªÉu h·ªçc</title>
  <meta name="description" content="B·∫£ng th·ªùi kh√≥a bi·ªÉu d·ªÖ th∆∞∆°ng cho h·ªçc sinh Ti·ªÉu h·ªçc: m√†u s·∫Øc t∆∞∆°i s√°ng, icon minh h·ªça, d·ªÖ b·∫•m, in ƒë·∫πp." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500;700&family=Nunito:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      /* B·∫£ng m√†u t∆∞∆°i s√°ng, an to√†n cho m·∫Øt tr·∫ª em */
      --bg: #fff7ed;           /* peach-50 */
      --surface: #ffffff;      /* white */
      --muted: #ffe4b5;        /* moccasin-ish */
      --text: #2b2a33;         /* dark neutral */
      --subtext: #5b5b66;
      --brand: #ff7ab6;        /* pink */
      --brand-600: #f6589d;
      --ring: #ffd6e9;
      --card: #ffffffcc;       /* translucent */
      --border: #ffd7ba;       /* soft orange border */
      --accent: #6aa9ff;       /* blue */
      --warn: #f59e0b;         /* amber-500 */

      /* Nh√£n m√†u "sticker" cho t·ª´ng lo·∫°i ti·∫øt */
      --c1-bg: #fff0f6; --c1-fg:#d6336c; /* Ti·∫øng Vi·ªát */
      --c2-bg: #e7f5ff; --c2-fg:#1c7ed6; /* To√°n */
      --c3-bg: #e6fcf5; --c3-fg:#0ca678; /* T·ª± nhi√™n & XH */
      --c4-bg: #fff9db; --c4-fg:#e67700; /* M·ªπ thu·∫≠t/√Çm nh·∫°c */
      --c5-bg: #f3f0ff; --c5-fg:#7950f2; /* Th·ªÉ d·ª•c */
    }

    [data-theme="dark"]{
      --bg:#0f172a; --surface:#111827; --muted:#1f2937; --text:#e5e7eb; --subtext:#a3a3b0;
      --brand:#f472b6; --brand-600:#ec4899; --ring:#fbcfe8; --card:#0b1220aa; --border:#334155; --accent:#60a5fa;
      --c1-bg:#3b1022; --c1-fg:#ff99c9; --c2-bg:#0b2239; --c2-fg:#8ecaff; --c3-bg:#0c2e27; --c3-fg:#7be3c2; --c4-bg:#3a2a02; --c4-fg:#ffd58a; --c5-bg:#221a3a; --c5-fg:#c9b6ff;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:'Baloo 2', 'Nunito', system-ui, -apple-system, Segoe UI, Roboto, Arial; color:var(--text);
      background:
        radial-gradient(120vh 60vh at 10% -10%, #ffe1f0 10%, transparent 60%),
        radial-gradient(100vh 60vh at 120% 10%, #dbeafe 0%, transparent 60%),
        linear-gradient(180deg, var(--bg), #fff);
      line-height:1.6;
    }
    .clouds{position:fixed; inset:0; pointer-events:none; opacity:.35; background:
      url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="800" height="400" viewBox="0 0 800 400"><g fill="%23ffffff"><circle cx="140" cy="120" r="40"/><circle cx="180" cy="120" r="50"/><circle cx="220" cy="120" r="40"/><rect x="140" y="120" width="80" height="40"/></g></svg>') repeat top/400px auto;
    }

    a{color:var(--accent); text-decoration:none}
    .container{max-width:1100px; margin:0 auto; padding:24px}

    header{
      position:sticky; top:0; z-index:50; backdrop-filter:saturate(180%) blur(10px);
      background:color-mix(in oklab, var(--bg) 75%, transparent);
      border-bottom:2px dashed var(--border);
    }
    .nav{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 24px}
    .brand{display:flex; align-items:center; gap:12px}
    .logo{width:44px; height:44px; display:grid; place-items:center; border-radius:14px; background:linear-gradient(135deg, #ffd166, #fca5a5); color:#5b5b66; font-weight:800; box-shadow:0 6px 0 #f59e0b33}
    .logo span{font-size:22px}
    .nav a{color:var(--text)}
    .navlinks{display:flex; gap:14px; align-items:center}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:12px 16px; border-radius:999px; border:2px solid var(--border); background:linear-gradient(0deg,var(--surface),var(--surface)); color:var(--text); cursor:pointer; font-weight:700; box-shadow:0 6px 0 #0000000a}
    .btn:hover{box-shadow:0 0 0 4px var(--ring)}
    .btn.primary{background:linear-gradient(135deg, var(--brand), var(--brand-600)); border-color:transparent; color:#fff}

    .hero{padding:56px 24px 24px; text-align:center}
    .title{font-size:clamp(30px, 5vw, 54px); line-height:1.1; font-weight:800; letter-spacing:-0.01em}
    .subtitle{font-size:clamp(15px, 2.2vw, 18px); color:var(--subtext); max-width:760px; margin:10px auto 18px}
    .tags{display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-top:10px}
    .tag{padding:8px 12px; border-radius:999px; border:2px dashed var(--border); color:var(--subtext); font-size:13px; background:#fff}

    .panel{background:var(--card); backdrop-filter:blur(6px); border:2px dashed var(--border); border-radius:24px; padding:18px}
    .grid{display:grid; gap:16px}
    @media(min-width:900px){ .grid.cols-2{grid-template-columns:1.2fr 0.9fr} }

    .card{background:var(--surface); border:2px dashed var(--border); border-radius:20px; padding:16px}
    .card h3{margin:0 0 8px; font-size:20px}
    .muted{color:var(--subtext); font-size:15px}

    /* B·∫¢NG TKB CHO H·ªåC SINH */
    .toolbar{display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin-bottom:12px}
    .toolbar .btn{padding:10px 14px; font-size:15px}
    .toolbar .soft{border-style:dashed}

    .table-wrap{overflow:auto; border-radius:18px; border:2px dashed var(--border)}
    table{width:100%; border-collapse:separate; border-spacing:0; background:var(--surface); font-size:16px}
    thead th{position:sticky; top:0; z-index:1; background:linear-gradient(0deg, #fffbeb, #fff); color:var(--text); font-weight:800}
    th,td{border-bottom:2px dashed var(--border); border-right:2px dashed var(--border); padding:12px; text-align:center; min-width:110px}
    th:first-child, td:first-child{position:sticky; left:0; background:color-mix(in oklab, var(--surface) 95%, transparent); z-index:1; font-weight:800}
    tr:last-child td{border-bottom:none}
    th:last-child, td:last-child{border-right:none}
    td[contenteditable="true"]{outline:none; border-radius:14px; min-height:64px}
    td:focus{box-shadow:inset 0 0 0 3px var(--accent)}

    /* Nh√£n m√†u "sticker" */
    .c1{background:var(--c1-bg); color:var(--c1-fg); font-weight:700}
    .c2{background:var(--c2-bg); color:var(--c2-fg); font-weight:700}
    .c3{background:var(--c3-bg); color:var(--c3-fg); font-weight:700}
    .c4{background:var(--c4-bg); color:var(--c4-fg); font-weight:700}
    .c5{background:var(--c5-bg); color:var(--c5-fg); font-weight:700}

    .foot{display:flex; justify-content:space-between; gap:12px; align-items:center; margin-top:14px}

    .legend{display:flex; gap:8px; flex-wrap:wrap}
    .swatch{display:inline-flex; align-items:center; gap:6px; padding:8px 12px; border-radius:999px; border:2px dashed var(--border); font-size:13px; background:#fff}

    /* FAQ & Li√™n h·ªá */
    details{background:var(--surface); border:2px dashed var(--border); border-radius:16px; padding:12px}
    summary{cursor:pointer; font-weight:700}
    form{display:grid; gap:10px}
    input, textarea, select{padding:12px 14px; border-radius:14px; border:2px dashed var(--border); background:var(--surface); color:var(--text)}

    .hint{font-size:13px; color:var(--subtext)}

    /* PRINT */
    @media print{
      header, .hero, .aside, .foot, .faq, .contact, .credits, .clouds{display:none}
      body{background:white; color:black}
      .container{max-width:100%; padding:0}
      .panel{border:none; padding:0}
      table{font-size:12px}
      th, td{padding:6px}
    }
  </style>
</head>
<body>
  <div class="clouds" aria-hidden="true"></div>
  <header>
    <nav class="nav">
      <div class="brand">
        <div class="logo" aria-hidden="true"><span>üéí</span></div>
        <strong>Th·ªùi kh√≥a bi·ªÉu Ti·ªÉu h·ªçc</strong>
      </div>
      <div class="navlinks">
        <a href="#tkb">B·∫£ng TKB</a>
        <a href="#faq">H∆∞·ªõng d·∫´n</a>
        <a href="#contact">Li√™n h·ªá</a>
        <button class="btn" id="themeBtn" aria-label="ƒê·ªïi giao di·ªán">üåà Giao di·ªán</button>
        <button class="btn primary" id="printBtn">üñ®Ô∏è In</button>
      </div>
    </nav>
  </header>

  <section class="hero">
    <h1 class="title">L·ªãch h·ªçc <span style="background:linear-gradient(90deg,var(--brand),#fca5a5); -webkit-background-clip:text; color:transparent">vui nh·ªôn</span> m·ªói ng√†y ‚ú®</h1>
    <p class="subtitle">C√°c b·∫°n nh·ªè c√≥ th·ªÉ t·ª± ƒëi·ªÅn m√¥n h·ªçc, d√°n nh√£n m√†u ki·ªÉu <em>sticker</em>, l∆∞u l·∫°i v√† in ra d√°n v√†o b√†n h·ªçc!</p>
    <div class="tags">
      <span class="tag">D·ªÖ b·∫•m</span>
      <span class="tag">M√†u t∆∞∆°i s√°ng</span>
      <span class="tag">Sticker m√¥n h·ªçc</span>
      <span class="tag">In ƒë·∫πp</span>
    </div>
  </section>

  <main class="container grid cols-2">
    <section class="panel" id="tkb" aria-labelledby="tkb-title">
      <div class="toolbar">
        <button class="btn" id="clearBtn">üßπ X√≥a h·∫øt</button>
        <button class="btn" id="saveBtn">üíæ L∆∞u</button>
        <button class="btn soft" id="exportJsonBtn">‚¨áÔ∏è Xu·∫•t JSON</button>
        <button class="btn soft" id="importJsonBtn">‚¨ÜÔ∏è Nh·∫≠p JSON</button>
        <button class="btn soft" id="exportCsvBtn">üìÑ Xu·∫•t CSV</button>
        <span class="hint">M·∫πo: nh·∫•p ƒë√¥i ƒë·ªÉ ƒë·ªïi nh√£n m√†u</span>
      </div>
      <div class="table-wrap">
        <table id="table" aria-describedby="tkb-desc">
          <caption id="tkb-desc" class="muted" style="caption-side:bottom; padding:8px 12px">B·∫£ng th·ªùi kh√≥a bi·ªÉu 7 ng√†y √ó 8 ti·∫øt. C√≥ th·ªÉ ch·ªânh s·ªë h√†ng/c√≥ CN.</caption>
          <thead>
            <tr>
              <th>Ti·∫øt / Ng√†y</th>
              <th>Th·ª© 2</th>
              <th>Th·ª© 3</th>
              <th>Th·ª© 4</th>
              <th>Th·ª© 5</th>
              <th>Th·ª© 6</th>
              <th>Th·ª© 7</th>
              <th>CN</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
      <div class="foot">
        <div class="legend" aria-label="Ch√∫ th√≠ch nh√£n m√†u">
          <span class="swatch" data-idx="1">üìñ Ti·∫øng Vi·ªát</span>
          <span class="swatch" data-idx="2">üßÆ To√°n</span>
          <span class="swatch" data-idx="3">üî¨ TN & XH</span>
          <span class="swatch" data-idx="4">üé® Ngh·ªá thu·∫≠t</span>
          <span class="swatch" data-idx="5">üèÉ Th·ªÉ d·ª•c</span>
        </div>
        <div style="display:flex; gap:8px; align-items:center">
          <label class="muted">S·ªë ti·∫øt: <input type="number" id="rowsInput" min="1" max="12" value="8" style="width:70px"></label>
          <label class="muted">C√≥ CN: <input type="checkbox" id="sunToggle" checked></label>
        </div>
      </div>
    </section>

    <aside class="grid aside">
      <div class="card">
        <h3 id="faq">H∆∞·ªõng d·∫´n nhanh cho b√©</h3>
        <ol class="muted" style="padding-left:18px; margin:8px 0 0">
          <li>Nh·∫•p v√†o √¥ ƒë·ªÉ vi·∫øt t√™n m√¥n h·ªçc, v√≠ d·ª•: <em>To√°n</em>, <em>T·∫≠p ƒë·ªçc</em>.</li>
          <li>Nh·∫•p ƒë√¥i (double‚Äëclick) ƒë·ªÉ ƒë·ªïi <strong>m√†u sticker</strong> cho √¥ ƒë√≥.</li>
          <li>Nh·∫•n <strong>L∆∞u</strong> ƒë·ªÉ c·∫•t l·∫°i. C√≥ th·ªÉ <strong>Xu·∫•t JSON/CSV</strong> ƒë·ªÉ chia s·∫ª.</li>
          <li>ƒêi·ªÅu ch·ªânh <strong>S·ªë ti·∫øt</strong> ho·∫∑c b·∫≠t/t·∫Øt <strong>CN</strong> theo th·ªùi kh√≥a bi·ªÉu c·ªßa l·ªõp.</li>
          <li>Nh·∫•n <strong>In</strong> ƒë·ªÉ in ra d√°n v√†o g√≥c h·ªçc t·∫≠p nh√©! üôÇ</li>
        </ol>
      </div>

      <div class="card faq">
        <h3>C√¢u h·ªèi th∆∞·ªùng g·∫∑p</h3>
        <details>
          <summary>L√†m sao chuy·ªÉn sang n·ªÅn t·ªëi (ban ƒë√™m)?</summary>
          <p class="muted">Nh·∫•n n√∫t üåà Giao di·ªán ·ªü g√≥c tr√™n ƒë·ªÉ ƒë·ªïi gi·ªØa s√°ng/t·ªëi.</p>
        </details>
        <details>
          <summary>D·ªØ li·ªáu l∆∞u ·ªü ƒë√¢u?</summary>
          <p class="muted">D·ªØ li·ªáu l∆∞u trong tr√¨nh duy·ªát c·ªßa con (localStorage), kh√¥ng g·ª≠i ƒëi n∆°i kh√°c.</p>
        </details>
      </div>

      <div class="card contact" id="contact">
        <h3>G√≥p √Ω cho b·ªë m·∫π/th·∫ßy c√¥</h3>
        <form onsubmit="event.preventDefault(); alert('C·∫£m ∆°n b·∫°n! M√¨nh ƒë√£ nh·∫≠n g√≥p √Ω.'); this.reset();">
          <input type="text" placeholder="H·ªç t√™n" required>
          <input type="email" placeholder="Email" required>
          <textarea rows="4" placeholder="N·ªôi dung g√≥p √Ω"></textarea>
          <button class="btn primary" type="submit">G·ª≠i g√≥p √Ω</button>
        </form>
      </div>

      <div class="card credits">
        <h3>Ghi ch√∫</h3>
        <p class="muted">Giao di·ªán t·ªëi ∆∞u cho h·ªçc sinh Ti·ªÉu h·ªçc: ph√¥ng ch·ªØ tr√≤n tr·ªãa, n√∫t to d·ªÖ b·∫•m, m√†u s·∫Øc th√¢n thi·ªán.</p>
      </div>
    </aside>
  </main>

  <footer class="container" style="text-align:center; color:var(--subtext); padding-bottom:48px">
    ¬© <span id="year"></span> Th·ªùi kh√≥a bi·ªÉu vui nh·ªôn ¬∑ H·ªçc vui m·ªói ng√†y.
  </footer>

  <script>
    const $ = (q,root=document)=>root.querySelector(q);
    const $$ = (q,root=document)=>[...root.querySelectorAll(q)];

    const tbody = $('#tbody');
    const rowsInput = $('#rowsInput');
    const sunToggle = $('#sunToggle');

    const STORAGE_KEY = 'tkb-data-v2-student';
    const THEME_KEY = 'tkb-theme';

    // Th√™m 1 m√†u n·ªØa cho Th·ªÉ d·ª•c
    const colorCycle = ['', 'c1','c2','c3','c4','c5'];

    function buildTable(rows=8, includeSun=true){
      tbody.innerHTML='';
      const days = includeSun ? 7 : 6;
      for(let r=1;r<=rows;r++){
        const tr = document.createElement('tr');
        const head = document.createElement('th'); head.textContent = 'Ti·∫øt ' + r; tr.appendChild(head);
        for(let c=1;c<=days;c++){
          const td = document.createElement('td');
          td.setAttribute('contenteditable','true');
          td.dataset.colorIndex = 0;
          td.addEventListener('dblclick', ()=>{
            let i = (+td.dataset.colorIndex + 1) % colorCycle.length; td.dataset.colorIndex=i;
            colorCycle.forEach(cl=> cl && td.classList.remove(cl));
            const cl = colorCycle[i]; if(cl) td.classList.add(cl);
          });
          tr.appendChild(td);
        }
        tbody.appendChild(tr);
      }
    }

    function toJSON(){
      const data = { rows: +rowsInput.value, sun: sunToggle.checked, cells: [] };
      $$('#tbody tr').forEach(tr=>{
        const row=[]; $$('td',tr).forEach(td=>{
          row.push({text: td.innerHTML, color: colorCycle[+td.dataset.colorIndex]||''});
        });
        data.cells.push(row);
      });
      return data;
    }

    function fromJSON(data){
      if(!data) return;
      rowsInput.value = data.rows ?? 8;
      sunToggle.checked = data.sun ?? true;
      buildTable(+rowsInput.value, sunToggle.checked);
      $$('#tbody tr').forEach((tr,ri)=>{
        $$('td',tr).forEach((td,ci)=>{
          const cell = data.cells?.[ri]?.[ci];
          if(cell){ td.innerHTML = cell.text || ''; const idx = colorCycle.indexOf(cell.color||''); td.dataset.colorIndex = Math.max(0, idx); colorCycle.forEach(cl=> cl && td.classList.remove(cl)); if(idx>0) td.classList.add(cell.color); }
        });
      });
    }

    function save(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(toJSON())); toast('ƒê√£ l∆∞u! ‚úÖ'); }
    function load(){ const raw = localStorage.getItem(STORAGE_KEY); if(raw){ try{ fromJSON(JSON.parse(raw)); }catch(e){ console.warn(e); } } else { buildTable(+rowsInput.value, sunToggle.checked); } }

    function download(filename, content, type='application/json'){
      const blob = new Blob([content], {type});
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = filename; a.click(); URL.revokeObjectURL(a.href);
    }

    function uploadJSON(){
      const inp = document.createElement('input'); inp.type='file'; inp.accept='.json,application/json';
      inp.onchange = ()=>{
        const file = inp.files[0]; if(!file) return;
        const fr = new FileReader(); fr.onload = ()=>{ try{ const data = JSON.parse(fr.result); fromJSON(data); save(); toast('ƒê√£ nh·∫≠p JSON'); }catch(e){ alert('File kh√¥ng h·ª£p l·ªá'); } };
        fr.readAsText(file);
      };
      inp.click();
    }

    function exportCSV(){
      const header = ['Tiet/Ngay','Thu 2','Thu 3','Thu 4','Thu 5','Thu 6','Thu 7'].concat(sunToggle.checked?['CN']:[]).join(',');
      const lines = [header];
      $$('#tbody tr').forEach((tr,i)=>{
        const row=['Tiet '+(i+1)]; $$('td',tr).forEach(td=> row.push('"'+(td.innerText||'').replaceAll('"','""')+'"')); lines.push(row.join(','));
      });
      download('thoikhoabieu.csv', lines.join('
'), 'text/csv');
    }

    function clearAll(){ if(confirm('X√≥a to√†n b·ªô n·ªôi dung b·∫£ng?')){ $$('#tbody td').forEach(td=>{ td.innerHTML=''; td.dataset.colorIndex = 0; colorCycle.forEach(cl=> cl && td.classList.remove(cl)); }); save(); } }

    function toast(msg){
      let t = document.createElement('div'); t.textContent = msg; t.style.position='fixed'; t.style.bottom='20px'; t.style.left='50%'; t.style.transform='translateX(-50%)'; t.style.background='var(--surface)'; t.style.border='2px dashed var(--border)'; t.style.padding='12px 16px'; t.style.borderRadius='16px'; t.style.boxShadow='0 10px 30px #0003'; t.style.zIndex='1000'; document.body.appendChild(t); setTimeout(()=>t.remove(), 1400);
    }

    // Theme
    function setTheme(theme){ document.documentElement.setAttribute('data-theme', theme); localStorage.setItem(THEME_KEY, theme); }
    function toggleTheme(){ const cur = document.documentElement.getAttribute('data-theme') || 'light'; setTheme(cur==='dark'?'light':'dark'); }

    // S·ª± ki·ªán
    rowsInput.addEventListener('change', ()=>{ buildTable(+rowsInput.value, sunToggle.checked); save(); });
    sunToggle.addEventListener('change', ()=>{ buildTable(+rowsInput.value, sunToggle.checked); save(); });
    $('#saveBtn').addEventListener('click', save);
    $('#clearBtn').addEventListener('click', clearAll);
    $('#exportJsonBtn').addEventListener('click', ()=> download('thoikhoabieu.json', JSON.stringify(toJSON(), null, 2)));
    $('#importJsonBtn').addEventListener('click', uploadJSON);
    $('#exportCsvBtn').addEventListener('click', exportCSV);
    $('#printBtn').addEventListener('click', ()=> window.print());
    $('#themeBtn').addEventListener('click', toggleTheme);

    // Kh·ªüi t·∫°o
    document.getElementById('year').textContent = new Date().getFullYear();
    const savedTheme = localStorage.getItem(THEME_KEY) || 'light'; setTheme(savedTheme);
    load();
  </script>
</body>
</html>
